1
ProLongWP.wss
11111111111111111111
// 991^A - наименование
// ^S - идентификатор - старый
// ^O - идентификатор - новый
// ^I - ИД дисциплины
// V - версия
//K - кафедра
//F - факультет
//N - разработчик
//O - отв.лицо
//E - дата согласования
//D - дата введения 

DEL
991
*
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
ADD
991
XXXXXXXXXXXXXXXXXXX
'%1'
XXXXXXXXXXXXXXXXXXX
IF
if v920: 'WPD' then '1' fi
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
IF
if val(&uf('J,WPD=',v991^O))=0 then '1' fi
NEWMFN
'*'
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
ADD
920
XXXXXXXXXXXXXXXXXXX
'WPD'
XXXXXXXXXXXXXXXXXXX
ADD
3
XXXXXXXXXXXXXXXXXXX
v991^A,,,if v991^A='' then &uf('D,!WPD=',,v991^S,,'!,v3') fi
XXXXXXXXXXXXXXXXXXX
ADD
110
XXXXXXXXXXXXXXXXXXX
v991^O
XXXXXXXXXXXXXXXXXXX
ADD
83

&uf('D,!IDD=',,v83,,'!,v3^0')

ADD
205
XXXXXXXXXXXXXXXXXXX
v991^V,,,if v991^V='' then &uf('D,!WPD=',,v991^S,,'!,v205') fi
XXXXXXXXXXXXXXXXXXX
ADD
5
XXXXXXXXXXXXXXXXXXX
v991^K,,,if v991^K='' then &uf('D,!WPD=',,v991^S,,'!,v5') fi
XXXXXXXXXXXXXXXXXXX
ADD
6
XXXXXXXXXXXXXXXXXXX
v991^F,,,if v991^F='' then &uf('D,!WPD=',,v991^S,,'!,v6') fi
XXXXXXXXXXXXXXXXXXX
ADD
701
XXXXXXXXXXXXXXXXXXX
v991^N,,,if v991^N='' then &uf('D,!WPD=',,v991^S,,'!,v701') fi
XXXXXXXXXXXXXXXXXXX
ADD
702
XXXXXXXXXXXXXXXXXXX
v991^O,,,if v991^O='' then &uf('D,!WPD=',,v991^S,,'!,v702') fi
XXXXXXXXXXXXXXXXXXX
ADD
215
XXXXXXXXXXXXXXXXXXX
v991^E,,,if v991^E='' then &uf('D,!WPD=',,v991^S,,'!,v215') fi
XXXXXXXXXXXXXXXXXXX
ADD
210
XXXXXXXXXXXXXXXXXXX
v991^D,,,if v991^D='' then &uf('D,!WPD=',,v991^S,,'!,v210') fi
XXXXXXXXXXXXXXXXXXX
END
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
//---------------------------------------------------замена в запиях каталога

IF
if v991^]<>'' then '1' fi,,,,&uf('+7W100#',if &unifor('IPRIVATE,DBN,')<>'' then &unifor('IPRIVATE,DBN,') else 'IBIS' fi
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
REP
991^]
1
v991^] ,,,if v991^]: '.' then  else '.mnu' fi
XXXXXXXXXXXXXXXXXXX
ADD
991
XXXXXXXXXXXXXXXXXXX
 (if  &uf('+5T',,&uf('Av991^]#1'),,)<>'' then &uf('+7U100#',&uf('+5T',,&uf('Av991^]#1'),,) ) else break fi/),,&uf('+7G100'),,,
XXXXXXXXXXXXXXXXXXX
FI
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
//
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
имена БД каталога кладу из G100 в v994

DEL
994
*
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
ADD
994
XXXXXXXXXXXXXXXXXXX
(g100/)
XXXXXXXXXXXXXXXXXXX
//----------------цикл по БД каталога
REPEAT
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
CORREC
&uf('Av994#1')
mpu,,"^S"v991^S,,,,"^O"v991^O,,,"^1"v991^1
"WP="v991^S

ADD
920
XXXXXXXXXXXXXXXXXXX
&uf('+7W1#')
XXXXXXXXXXXXXXXXXXX
REP
691^5
F
(if p(v691) then if p(v691^5) then if &uf('+97',v691^5)=&uf('Av1001^S#1') then &uf('Av1001^O#1'),,,&uf('+7U1#',v691) else v691^5 fi else # fi fi/)
XXXXXXXXXXXXXXXXXXX
IF
if g1<>'' then '1' fi
PUTLOG
&uf('+D'),,' - изменено в запис каталога MFN=',,f(val(mfn),0,0)
IF
if val(v1001^1)=1  then '1' fi,
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
ADD
944
XXXXXXXXXXXXXXXXXXX
(g1/)
XXXXXXXXXXXXXXXXXXX
FI
FI
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
DEL
1001
*
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
END
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
DEL
994
1
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
UNTIL
if p(v994) then '1' fi
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
FI
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
FI
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
