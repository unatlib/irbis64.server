0
//12 PUTLOG
// 7.1 замена кода специальности,направления,факультета,кафедры читающей
// в 991^A что заменить, 991^B на что в записях VUZ
// используется для отмеченных
//15 условия замены в 991
// ! факультет / специальность | направление + ФО = ВО
IF
if v991^!='' or v991^!=&uf('+97',v68^A) then if v991^/='' or v991^/=&uf('+97',v68^C) then if v991^|='' or v991^|=&uf('+97',v68^N) then if v991^+='' or v991^+=&uf('+97',v68^O) then if v991^=='' or v991^==&uf('+97',v68^V)  then  '1' fi fi fi fi fi
DEL
1991
*


ADD
1991

(v991/)

REPEAT
DEL
992
*


DEL
991
*


ADD
991

&uf('Av1991#1')

// в 992 параметр отбора
ADD
992

if v991^X<>'' then '^',v991^X,v991^Y fi

IF
if v991^C='C' then '1' fi
//-------------------------СПЕЦИАЛЬНОСТЬ
IF
if v920: 'VUZ' then '1' fi
//....................откорректирую коды в записях VUZ
DEL
111
*


ADD
111

v68^C

REP
68^C
1
if v992='' or v992: '^B' or v992: '^I' or v992<>'' and v68: v992 then if v68^C<>'' then if s("!"v68^C"!"): s('!',v991^A,'!') then v991^B else v68^C fi fi else v68^C fi

IF
if &uf('+97',v111)<>&uf('+97',v68^C) then '1' fi
PUTLOG
'Заменено в записи VUZ. MFN=',f(val(mfn),0,0)
FI
DEL
111
*


FI
FI
IF
if v991^C='N' then '1' fi
//-------------------------НАПРАВЛЕНИЕ
IF
if v920: 'VUZ' then '1' fi
//....................откорректирую коды в записях VUZ
DEL
111
*


ADD
111

v68^N

REP
68^N
1
if v992='' or v992: '^B' or v992: '^I' or v992<>'' and v68: v992 then if v68^N<>'' then if s("!"v68^N"!"): s('!',v991^A,'!') then v991^B else v68^N fi fi else v68^N fi

IF
if &uf('+97',v111)<>&uf('+97',v68^N) then '1' fi
PUTLOG
'Заменено в записи VUZ. MFN=',f(val(mfn),0,0)
FI
DEL
111
*


FI
FI
IF
if v991^C='A' then '1' fi
//-------------------------ФАКУЛЬТЕТ
IF
if v920: 'VUZ' then '1' fi
//....................откорректирую коды в записях VUZ
DEL
111
*


ADD
111

v68^A

REP
68^A
1
if v992='' or v992: '^B' or v992: '^I' or v992<>'' and v68: v992 then if v68^A<>'' then if s("!"v68^A"!"): s('!',v991^A,'!') then v991^B else v68^A fi fi else v68^A fi

IF
if &uf('+97',v111)<>&uf('+97',v68^A) then '1' fi
PUTLOG
'Заменено в записи VUZ. MFN=',f(val(mfn),0,0)
FI
DEL
111
*


FI
FI
IF
if v991^C='O' then '1' fi
//-------------------------Форма обучения
IF
if v920: 'VUZ' then '1' fi
//....................откорректирую коды в записях VUZ
DEL
111
*


ADD
111

v68^O

REP
68^O
1
if v992='' or v992: '^B' or v992: '^I' or v992<>'' and v68: v992 then if v68^O<>'' then if s("!"v68^O"!"): s('!',v991^A,'!') then v991^B else v68^O fi fi else v68^O fi

IF
if &uf('+97',v111)<>&uf('+97',v68^O) then '1' fi
PUTLOG
'Заменено в записи VUZ. MFN=',f(val(mfn),0,0)
FI
DEL
111
*


FI
FI
IF
if v991^C='V' then '1' fi
//-------------------------Вид обучения
IF
if v920: 'VUZ' then '1' fi
//....................откорректирую коды в записях VUZ
DEL
111
*


ADD
111

v68^V

REP
68^V
1
if v992='' or v992: '^B' or v992: '^I' or v992<>'' and v68: v992 then if v68^V<>'' then if s("!"v68^V"!"): s('!',v991^A,'!') then v991^B else v68^V fi fi else v68^V fi

IF
if &uf('+97',v111)<>&uf('+97',v68^V) then '1' fi
PUTLOG
'Заменено в записи VUZ. MFN=',f(val(mfn),0,0)
FI
DEL
111
*


FI
FI
IF
if v991^C='F' then '1' fi
//-------------------------Семестр
IF
if v920: 'VUZ' then '1' fi
//....................откорректирую коды в записях VUZ
DEL
111
*


ADD
111

v68^F

REP
68^F
1
if v992='' or v992: '^B' or v992: '^I' or v992<>'' and v68: v992 then if v68^F<>'' then if val(v68^F)=val(v991^A) then v991^B else v68^F fi fi else v68^F fi

IF
if v111<>v68^F then '1' fi
PUTLOG
'Заменено в записи VUZ. MFN=',f(val(mfn),0,0)
FI
DEL
111
*


FI
FI
IF
if v991^C='H' then '1' fi
//-------------------------КАФЕДРА ЧИТАЮЩАЯ
IF
if v920: 'VUZ' then '1' fi
//....................откорректирую коды в записях VUZ
DEL
111
*


ADD
111

(v69^B/)

REP
69^B
F
(if p(v69) then if v69^B<>'' then if &uf('Av992#1')='' or &uf('Av992#1')<>'' and &uf('Av991^X#1'): 'B' and v69: &uf('Av992#1') or &uf('Av991^X#1')<>'' and &uf('Av991^X#1'): 'I' and &uf('+97',&uf('Av991^Y#1'))=&uf('+97',v69^D) or 'ALCNVOF': &uf('Av991^X#1') then if s(|!|v69^B|!|): s('!',&unifor('Av991^A#1'),'!') then if &unifor('Av991^B#1')<>'' then &unifor('Av991^B#1') else # fi else v69^B fi else v69^B fi else # fi fi/)

IF
if &uf('+97',v111)<>&uf('+97',v69^B) then '1' fi
PUTLOG
'Заменено в записи VUZ. MFN=',f(val(mfn),0,0)
FI
DEL
111
*


FI
FI
DEL
1991
1


UNTIL
if p(v1991) then '1' fi
DEL
991
*


DEL
992
*


FI
