1
«амена идентификатора, цикла, кафедры дисциплины в одноименных дисциплинах записей каталога. ¬ыполнить?

// верси€ 14
// перенос данных из DISC в записи каталога, в поле 691
// в 991 идентификатор отмеченного наименовани€ дисциплины VUZ слева
// в 994 отмеченные наименовани€ дисциплин в каталоге справа
// в 992 пол€ записи отмеченной VUZ
IF
if (val(&uf('+N991'))=0) or (val(&uf('+N994'))=0) then '1' fi
PUTLOG
'Ќаименовани€ не отмечены или некорректные!'
FI
IF
if (val(&uf('+N991'))>1)  then '1' fi
PUTLOG
'—ледует отметить только одно замен€ющее наименование!'
FI
IF
if (val(&uf('+N991'))=1) then '1' fi
REP
991
1
&uf('DVUZ,?IDD=',,v991,,'?,v3^A')

DEL
1691
*


ADD
1691

(v691/),,,&uf('+7W8#')

DEL
1083
*


//--------------------------------------------цикл по полю 994, т.е по отмеченным наименов. каталога
REPEAT
//----дл€ совпавшего наименовани€ мен€ю идентификатор
REP
691^I
F
(if p(v691) then if p(v691^I) then  if &uf('+97',v691^D)=&uf('+97',&uf('Av994#1'))  then &uf('Av992^I#1') else v691^I fi else # fi fi/)

REP
691
F
(if p(v691) then v691,if a(v691^I) and &uf('+97',v691^D)=&uf('+97',&uf('Av994#1'))  then '^I',,&uf('Av992^I#1') fi fi/)

//----дл€ совпавшего наименовани€ мен€ю цикл
REP
691^S
F
(if p(v691) then if p(v691^S) then  if &uf('+97',v691^D)=&uf('+97',&uf('Av994#1'))  then &uf('Av992^S#1') else v691^S fi else # fi fi/)

REP
691
F
(if p(v691) then v691,if a(v691^S) and &uf('+97',v691^D)=&uf('+97',&uf('Av994#1'))  then '^S',,&uf('Av992^S#1') fi fi/)

//----дл€ совпавшего наименовани€ мен€ю уровеь компонента
REP
691^K
F
(if p(v691) then if p(v691^K) then  if &uf('+97',v691^D)=&uf('+97',&uf('Av994#1'))  then &uf('Av992^K#1') else v691^K fi else # fi fi/)

REP
691
F
(if p(v691) then v691,if a(v691^K) and &uf('+97',v691^D)=&uf('+97',&uf('Av994#1'))  then '^K',,&uf('Av992^K#1') fi fi/)

//----дл€ совпавшего наименовани€ мен€ю кафедру читающую
REP
691^B
F
(if p(v691) then if p(v691^B) then  if &uf('+97',v691^D)=&uf('+97',&uf('Av994#1'))  then &uf('Av992^B#1') else v691^B fi else # fi fi/)

REP
691
F
(if p(v691) then v691,if a(v691^B) and &uf('+97',v691^D)=&uf('+97',&uf('Av994#1'))  then '^B',,&uf('Av992^B#1') fi fi/)

REP
691^D
F
(if p(v691) then if p(v691^D) then  if &uf('+97',v691^D)=&uf('+97',&uf('Av994#1'))  then &uf('Av991#1') else v691^D fi else # fi fi/)

DEL
994
1


UNTIL
if p(v994) then '1' fi
//-----------------------------------------конец цикла по 994
IF
if v691<>v1691 then '1' fi
PUTLOG
'ќткорректирована запись MFN=',f(val(mfn),0,0)
FI
DEL
1691
*


//-------конец есть поле 991
FI
DEL
991
*


DEL
992
*


DEL
994
*


