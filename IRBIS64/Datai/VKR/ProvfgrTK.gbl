0
//краткий фариант проверки фонда
DEFFLD
3000
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
DEL
4000

XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
REPEAT
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
ADD
1
XXXXXXXXXXXXXXXXXXX
if p(v1991) then if v1991|+| : &unifor('Av1003#1') then else &unifor('Av1003#1')'/1' fi fi  
XXXXXXXXXXXXXXXXXXX
REP
1991
F
(if p(v1991) then if &unifor('G0/'v1991)=&unifor('Av1003#1')then &unifor('G0/'v1991),'/' f(val(&unifor('G2/'v1991))+1,0,0) else v1991 fi fi/)/
XXXXXXXXXXXXXXXXXXX
ADD
1991
XXXXXXXXXXXXXXXXXXX
if a(v1991) then &unifor('Av1003#1')'/1' fi  
XXXXXXXXXXXXXXXXXXX
ADD
1991
XXXXXXXXXXXXXXXXXXX
v1
XXXXXXXXXXXXXXXXXXX
DEL
1
1
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
DEL
1003
1
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
UNTIL
if &unifor('Av1003#1')<>'' then '1' else '0' fi
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
REPEAT
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
IF
if val(&uf('J',&unifor('+D'),',IN=',&unifor('G0/'&unifor('Av1991#1'))))=0 then '1' fi
PUTFLD
&unifor('G0/'&unifor('Av1991#1')),' - экземпл€р не найден'
FI
CORREC
&unifor('+D')
'^A'&unifor('G0/'&unifor('Av1991#1')),"^B"v991^b,"^C"v991^c,if val(&unifor('G2/'&unifor('Av1991#1')))<>1 then '^D'&unifor('G1/'&unifor('Av1991#1')) fi
'IN='&unifor('G0/'&unifor('Av1991#1'))
XXXXXXXXXXXXXXXXXXX
//^A - провер€емый инвентарь
//^B - дата проверки
//^c - провер€емый фонд=место хранени€
REP
910^S
F
(if p(v910)then if '2 6 7':v910^a then # else if p(v910^s) then if v910^h=&unifor('Av1001^A#1') or v910^b=&unifor('Av1001^A#1') then if &unifor('Av1001^B#1')<>'' and &uf('G0/'v910^s)=&unifor('Av1001^B#1') or &unifor('Av1001^B#1')='' and &uf('G0/'v910^s)=&unifor('3') then v910^s else if &unifor('Av1001^B#1')<>'' then &unifor('Av1001^B#1') else &unifor('3') fi,&unifor('Av1001^D#1') fi,if &unifor('Av1001^C#1')<>'' then if &unifor('Av1001^C#1')=v910^d then else '^!'&unifor('Av1001^C#1') fi fi else v910^s fi else # fi fi fi/)
XXXXXXXXXXXXXXXXXXX
ADD
910^$
F
(if p(v910) then if '2 6 7':v910^a then # else if a(v910^s) then  if v910^h=&unifor('Av1001^A#1')  then if &unifor('Av1001^B#1')<>'' then &unifor('Av1001^B#1') else &unifor('3') fi else # fi else # fi fi fi/)
XXXXXXXXXXXXXXXXXXX
ADD
99
XXXXXXXXXXXXXXXXXXX
(if p(v910)then if p(v910^$) then |^A|v910^a,|^B|v910^b,|^C|v910^c,|^D|v910^d,|^H|v910^h,|^F|v910^f,|^$|d910^$,&unifor('G0/'v910^$),|^U|v910^u,|^Y|v910^Y,if p(v910^1)then v910^1,'^0'f(val(&unifor('G2/'v910^$)),0,0) fi,|^2|v910^2,|^T|v910^t,|^R|v910^r,|^4|v910^4,|^=|v910^=,|^Q|v910^q,|^E|v910^e,if &unifor('IPRIVATE,PRFDMHR,')<>'' then if &unifor('IPRIVATE,PRFDMHR,')=v910^d then else '^!'&unifor('IPRIVATE,PRFDMHR,') fi fi fi fi /)
XXXXXXXXXXXXXXXXXXX
DEL
910
F
(if p(v910) then if p(v910^$) then '1' else '0' fi fi/)
XXXXXXXXXXXXXXXXXXX
ADD
910
XXXXXXXXXXXXXXXXXXX
(v99/)
XXXXXXXXXXXXXXXXXXX
CHA
910
*
'^$'
'^S'
DEL
99
*
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
// формирование протокола проверки
PUTFLD
&uf('+7W5#',v1001),,,&uf('6provekz')
DEL
1001
1
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
END
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
DEL
1991
1
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
UNTIL
if &unifor('Av1991#1')<>'' then '1' else '0' fi
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
DEL
991
1
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
GETFLD
4000
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
