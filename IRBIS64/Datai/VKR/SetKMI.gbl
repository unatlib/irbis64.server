1
SETKMI.wss
Ввести значения КМИ для заданного кол-ва экземпляров по месту хранения
//12 PUTLOG
//991^D - место хранения
//991^1 - кол-во экземпляров
//991^= - КМИ
DEL
991
*


ADD
991

mpu,'%1'

DEL
910^=
*


DEL
1910
*


ADD
1910

(v910/)

// в G2 счетчик откор. экз.
ADD
910

&uf('+7W1#',v991^1),,&uf('+7W2#')

REP
910
F
(if p(v910) then ,v910,,,if s('0 1 9'): v910^A and  val(&uf('AG1#1'))>0 then if &uf('Av991^D#1')='' or &uf('+97',v910^D)=&uf('Av991^D#1')  then '^=',&uf('Av991^=#1'),,&uf('+7W1#',f(val(&uf('AG1#1'))-1,0,0)),,&uf('+7W2#',f(val(&uf('AG2#1'))+1,0,0)) fi fi fi/)

IF
if v910<>v1910 then '1' fi
PUTLOG
'Откорректировано в записи ',f(val(mfn),0,0),' экземпляров ',G2
FI
DEL
991
*


DEL
1910
*


