0
IF
if v920: 'AB' then '1' else '0' fi
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
// перерасчет текущего состояния
REP
35
1
if s(v41^D,v42^D,v39^D)<>'' then '^D',,f(val(v41^D)+rsum((v42^D|,|))-rsum((v39^D|,|)),0,2),,,'^C',&uf('3') fi

ADD
35

if a(v35) then if s(v41^D,v42^D,v39^D)<>'' then '^D',,f(val(v41^D)+rsum((v42^D|,|))-rsum((v39^D|,|)),0,2),,,'^C',&uf('3') fi fi

FI
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
IF
if v920: 'ODER' then '1' else '0' fi
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
// новый заказ в поле 942
ADD
942
XXXXXXXXXXXXXXXXXXX
if a(v942) then  if  V140^a='5' then   '^AM0','^C',&unifor('3'),  else  '^AM0^D15.00','^C',&unifor('3'),'^L',&unifor('3') fi if v903<>'' then '^AP1','^C',&unifor('3') fi else  if v903<>'' then  if v942^A: 'P1' then else if &uf('Av942^A#',&uf('+N942') ): 'M0' then '^AP1','^C',&unifor('3') fi fi  else  if &uf('Av902^D#1')<>'' then if v942^A: 'M4' then else '^AM4',,'^C',&unifor('3') fi fi fi fi
XXXXXXXXXXXXXXXXXXX
// дописываю стоимость в поле 942 - подполя D и L
REP
942
F
&uf('6SubfldDL')
XXXXXXXXXXXXXXXXXX
ADD
31
XXXXXXXXXXXXXXXXXXX
if a(v31) and (v140^A:'1' or  v140^A:'2' or  v140^A:'3')  then '01' else  fi
XXXXXXXXXXXXXXXXXXX
REP
30
1
v30,if v30: '^C' then else '^C',&unifor('3') fi
XXXXXXXXXXXXXXXXXXX
REP
30
1
if &uf('6etap')<>'' then &uf('6etap') else v30 fi
XXXXXXXXXXXXXXXXXXX
FI
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXX
