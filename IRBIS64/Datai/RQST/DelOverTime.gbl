1
DelOverTime.wss
”даление Ќ≈¬џѕќЋЌ≈ЌЌџ’ и Ѕ–ќЌ»–ќ¬јЌЌџ’ заказов с истекшим сроком
// 991^A - кол-во дней - если прошло с даты заказа, то удал€ть
DEL
991
*


ADD
991

'%1'

IF
if v991^A<>'' and v41='' and v43='' then '1' fi
//-----------------------------нет даты возврата, не на бронеполке
DEL
111
*


ADD
111

&uf('G0 ',v40)

REP
111
1
v111*6.4,,v111.2,,,v111*3.2,,

REP
111
1
&uf('3C',,&uf('3'),,'/',,v111)

IF
if val(v111)>val(v991^A) then '1' fi
//---запись заказа удал€ю
DELR




PUTLOG
'MFN=',,f(val(mfn),0,0),,' - запись заказа удалена: срок хранение ',,v111 ' больше заданного ',,v991^A,,,
FI
FI
IF
if v991^A<>'' and p(v40) and p(v43) then '1' fi
//-----------------------------заказ на бронеполке
DEL
111
*


ADD
111

&uf('G0 ',v43)

REP
111
1
v111*6.4,,v111.2,,v111*3.2,,

REP
111

&uf('3C',,&uf('3'),,'/',,v111)

IF
if val(v111)>val(v991^A) then '1' fi
//---истекло врем€ бронеполки
DELR




PUTLOG
'MFN=',,f(val(mfn),0,0),,' - запись заказа удалена: : срок бронировани€ ',,v111 ' больше заданного ',,v991^A,,,
//---корректировка в записи каталога
CORREC
v1
mpu,v910
'I=',,v903

REP
910^A
F
&uf('+7W1#'),,,(if p(v910) then if v910^A<>'' then if v910^A='9' then if ( &uf('Av1001^B#1')='' or &uf('Av1001^B#1')=&uf('+97',v910^B )) and  (&uf('Av1001^D#1')='' or &uf('Av1001^D#1')=&uf('+97',v910^D )) OR  ( &uf('Av1001^H#1')='' or &uf('Av1001^H#1')=&uf('+97',v910^H )) and (&uf('Av1001^D#1')='' or &uf('Av1001^D#1')=&uf('+97',v910^D ))   then '0',,,,&uf('+7W1#1'),,, else v910^A fi,,,,,,,,,else v910^A fi,,else # fi,,fi/)

REP
910^2
F
&uf('+7W1#'),,,(if p(v910)  then if p(v910^2) then if v910^A: 'U' then if ( &uf('Av1001^B#1')='' or &uf('Av1001^B#1')=&uf('+97',v910^B )) and  (&uf('Av1001^D#1')='' or &uf('Av1001^D#1')=&uf('+97',v910^D )) OR  ( &uf('Av1001^H#1')='' or &uf('Av1001^H#1')=&uf('+97',v910^H )) and (&uf('Av1001^D#1')='' or &uf('Av1001^D#1')=&uf('+97',v910^D )) then if val(v910^2)>1 then  f(val(v910^2)-1,0,0) else '0' fi,,&uf('+7W1#1'),,,,else v910^2  fi,,,,,,,,,else v910^2 else v910^2 fi,,else # fi,,fi/)

IF
if val(g1)>0 then '1' fi
PUTLOG
'Ѕƒ: ',,&uf('+D'),,' MFN: ',,f(val(mfn),0,0),,,' - исправлен экземпл€р'
FI
DEL
1001
*


END
FI
FI
DEL
111
*


DEL
991
*


