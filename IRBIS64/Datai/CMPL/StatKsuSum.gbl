0
// для пополнения КСУ по нескольким БД
// суммирование одноименных полей-подполей
DEL
1001
*


//----------17---------123AB
ADD
1001

'^1',f((rsum(v17^1|,|)),0,0),'^2',f((rsum(v17^2|,|)),0,0),'^3',f((rsum(v17^3|,|)),0,0),'^A',f((rsum(v17^A|,|)),0,0),'^B',f((rsum(v17^B|,|)),0,0),

DEL
17
*


ADD
17

v1001

REP
17
1
"^1"v17^1,,"^2"v17^2,,"^3"v17^3,,"^A"v17^A,,"^B"v17^B,,

DEL
1001
*


//----------18---------1234567
ADD
1001

'^1',f((rsum(v18^1|,|)),0,0),'^2',f((rsum(v18^2|,|)),0,0),'^3',f((rsum(v18^3|,|)),0,0),'^4',f((rsum(v18^4|,|)),0,0),'^5',f((rsum(v18^5|,|)),0,0),'^6',f((rsum(v18^6|,|)),0,0),'^7',f((rsum(v18^7|,|)),0,0),

DEL
18
*


ADD
18

v1001

DEL
1001
*


//----------19---------
ADD
1001

f((rsum(v19|,|)),0,0),,,,

DEL
19
*


ADD
19

v1001

DEL
1001
*


//----------21---------
ADD
1001

&uf('+7W10#',,(v21/) ),,&uf('+7G10'),,(g10/)

DEL
21
*


ADD
21

(v1001/)

DEL
1001
*


//-----------20-------------ABCDEFG
ADD
1001

'^A',f((rsum(v20^A|,|)),0,0),'^B',f((rsum(v20^B|,|)),0,0),'^C',f((rsum(v20^C|,|)),0,0),'^D',f((rsum(v20^D|,|)),0,0),'^E',f((rsum(v20^E|,|)),0,0),'^F',f((rsum(v20^F|,|)),0,0),'^G',f((rsum(v20^G|,|)),0,0),

DEL
20
*


ADD
20

v1001

REP
20
1
"^A"v20^A,,"^B"v20^B,,"^C"v20^C,,"^D"v20^D,,"^E"v20^E,,"^F"v20^F,,"^G"v20^G,,

DEL
1001
*


//----------45------ABCDEFGX123456.:(L
ADD
1001

'^1',f((rsum(v45^1|,|)),0,0),'^2',f((rsum(v45^2|,|)),0,0),'^3',f((rsum(v45^3|,|)),0,0),'^4',f((rsum(v45^4|,|)),0,0),'^5',f((rsum(v45^5|,|)),0,0),'^6',f((rsum(v45^6|,|)),0,2),'^A',f((rsum(v45^A|,|)),0,0),'^B',f((rsum(v45^B|,|)),0,0),'^C',f((rsum(v45^C|,|)),0,0),'^D',f((rsum(v45^D|,|)),0,0),'^E',f((rsum(v45^E|,|)),0,0),'^F',f((rsum(v45^F|,|)),0,0),'^G',f((rsum(v45^G|,|)),0,0),'^x',f((rsum(v45^x|,|)),0,0),'^.',f((rsum(v45^.|,|)),0,0),'^:',f((rsum(v45^:|,|)),0,0),,,'^(',f((rsum(v45^(|,|)),0,0),,,,'^L',f((rsum(v45^L|,|)),0,0),

DEL
45
*


ADD
45

v1001

REP
45
1
"^1"v45^1,,"^2"v45^2,,"^3"v45^3,,"^4"v45^4,,"^5"v45^5,,"^6"v45^6,,"^A"v45^A,,"^B"v45^B,,"^C"v45^C,,"^D"v45^D,,"^E"v45^E,,"^F"v45^F,,"^G"v45^G,,"^X"v45^X,,"^."v45^.,,"^:"v45^:,,,,"^("v45^(,,,,"^L"v45^L,,


DEL
1001
*


//-----------47---------123456789ABCDEFX
ADD
1001

'^1',f((rsum(v47^1|,|)),0,0),'^2',f((rsum(v47^2|,|)),0,0),'^3',f((rsum(v47^3|,|)),0,0),'^4',f((rsum(v47^4|,|)),0,0),'^5',f((rsum(v47^5|,|)),0,0),'^6',f((rsum(v47^6|,|)),0,0),'^7',f((rsum(v47^7|,|)),0,0),'^8',f((rsum(v47^8|,|)),0,0),'^9',f((rsum(v47^9|,|)),0,0),'^A',f((rsum(v47^A|,|)),0,0),'^B',f((rsum(v47^B|,|)),0,0),'^C',f((rsum(v47^C|,|)),0,0),'^D',f((rsum(v47^D|,|)),0,0),'^E',f((rsum(v47^E|,|)),0,0),'^F',f((rsum(v47^F|,|)),0,0),'^x',f((rsum(v47^x|,|)),0,0),

DEL
47
*


ADD
47

v1001

REP
47
1
"^1"v47^1,,"^2"v47^2,,"^3"v47^3,,"^4"v47^4,,"^5"v47^5,,"^6"v47^6,,"^7"v47^7,,"^8"v47^8,,"^9"v47^9,,"^A"v47^A,,"^B"v47^B,,"^C"v47^C,,"^D"v47^D,,"^E"v47^E,,"^F"v47^F,,"^X"v47^X,,

DEL
1001
*


//-----------48---------------123456789X
ADD
1001

'^1',f((rsum(v48^1|,|)),0,0),'^2',f((rsum(v48^2|,|)),0,0),'^3',f((rsum(v48^3|,|)),0,0),'^4',f((rsum(v48^4|,|)),0,0),'^5',f((rsum(v48^5|,|)),0,0),'^6',f((rsum(v48^6|,|)),0,0),'^7',f((rsum(v48^7|,|)),0,0),'^8',f((rsum(v48^8|,|)),0,0),'^9',f((rsum(v48^9|,|)),0,0),'^x',f((rsum(v48^x|,|)),0,0),

DEL
48
*


ADD
48

v1001

REP
48
1
"^1"v48^1,,"^2"v48^2,,"^3"v48^3,,"^4"v48^4,,"^5"v48^5,,"^6"v48^6,,"^7"v48^7,,"^8"v48^8,,"^9"v48^9,,"^X"v48^X,,

DEL
1001
*


//-----------49---------12345678X
ADD
1001

'^1',f((rsum(v49^1|,|)),0,0),'^2',f((rsum(v49^2|,|)),0,0),'^3',f((rsum(v49^3|,|)),0,0),'^4',f((rsum(v49^4|,|)),0,0),'^5',f((rsum(v49^5|,|)),0,0),'^6',f((rsum(v49^6|,|)),0,0),'^7',f((rsum(v49^7|,|)),0,0),'^8',f((rsum(v49^8|,|)),0,0),f((rsum(v49^x|,|)),0,0),

DEL
49
*


ADD
49

v1001

REP
49
1
"^1"v49^1,,"^2"v49^2,,"^3"v49^3,,"^4"v49^4,,"^5"v49^5,,"^6"v49^6,,"^7"v49^7,,"^8"v49^8,,"^X"v49^X,,

DEL
1001
*


//-----------145---------12ABCDEFG HIJKPQL MNORSTU VWX----
ADD
1001

'^1',f((rsum(v145^1|,|)),0,2),,,,,'^2',f((rsum(v145^2|,|)),0,2),,,,,,,,,,,,'^A',f((rsum(v145^A|,|)),0,0),'^B',f((rsum(v145^B|,|)),0,0),'^C',f((rsum(v145^C|,|)),0,2),'^D',f((rsum(v145^D|,|)),0,0),'^E',f((rsum(v145^E|,|)),0,0),'^F',f((rsum(v145^F|,|)),0,2),'^G',f((rsum(v145^G|,|)),0,0),'^H',f((rsum(v145^H|,|)),0,0),'^I',f((rsum(v145^I|,|)),0,2),'^J',f((rsum(v145^J|,|)),0,0),'^K',f((rsum(v145^K|,|)),0,0),'^P',f((rsum(v145^P|,|)),0,0),'^Q',f((rsum(v145^Q|,|)),0,0),'^L',f((rsum(v145^L|,|)),0,0),'^M',f((rsum(v145^M|,|)),0,0),'^N',f((rsum(v145^N|,|)),0,0),'^O',f((rsum(v145^O|,|)),0,0),'^R',f((rsum(v145^D|,|)),0,0),'^S',f((rsum(v145^S|,|)),0,0),'^T',f((rsum(v145^T|,|)),0,0),'^U',f((rsum(v145^U|,|)),0,0),'^V',f((rsum(v145^V|,|)),0,0),'^W',f((rsum(v145^W|,|)),0,0),'^x',f((rsum(v145^x|,|)),0,0),

DEL
145
*


ADD
145

v1001

REP
145
1
"^1"v145^1,,"^2"v145^2,,"^A"v145^A,,"^B"v145^B,,"^C"v145^C,,"^D"v145^D,,"^E"v145^E,,"^F"v145^F,,"^G"v145^G,,"^H"v145^H,,"^I"v145^I,,"^J"v145^J,,"^K"v145^K,,"^P"v145^P,,"^Q"v145^Q,,"^L"v145^L,,"^M"v145^M,,"^N"v145^N,,"^O"v145^O,,"^R"v145^R,,"^S"v145^S,,"^T"v145^T,,"^U"v145^U,,"^V"v145^V,,"^W"v145^W,,"^X"v145^X,,

DEL
1001
*


//----------146-----------ABCDEFG HIJKLMNZ-------
ADD
1001

'^A',f((rsum(v146^A|,|)),0,0),'^B',f((rsum(v146^B|,|)),0,0),'^C',f((rsum(v146^C|,|)),0,0),'^D',f((rsum(v146^D|,|)),0,0),'^E',f((rsum(v146^E|,|)),0,0),'^F',f((rsum(v146^F|,|)),0,0),'^G',f((rsum(v146^G|,|)),0,0),'^H',f((rsum(v146^H|,|)),0,0),'^I',f((rsum(v146^I|,|)),0,0),'^J',f((rsum(v146^J|,|)),0,0),'^K',f((rsum(v146^K|,|)),0,0),'^L',f((rsum(v146^L|,|)),0,0),'^M',f((rsum(v146^M|,|)),0,0),'^N',f((rsum(v146^N|,|)),0,0),'^Z',f((rsum(v146^Z|,|)),0,0),

DEL
146
*


ADD
146

v1001

REP
146
1
"^A"v146^A,,"^B"v146^B,,"^C"v146^C,,"^D"v146^D,,"^E"v146^E,,"^F"v146^F,,"^G"v146^G,,"^H"v146^H,,"^I"v146^I,,"^J"v146^J,,"^K"v146^K,,"^L"v146^L,,"^M"v146^M,,"^N"v146^N,,"^Z"v146^Z,,"^X"v146^X,,

DEL
1001
*


//----------147-----------ABCDEFGHIJKZ
ADD
1001

'^A',f((rsum(v147^A|,|)),0,0),'^B',f((rsum(v147^B|,|)),0,0),'^C',f((rsum(v147^C|,|)),0,0),'^D',f((rsum(v147^D|,|)),0,0),'^E',f((rsum(v147^E|,|)),0,0),'^F',f((rsum(v147^F|,|)),0,0),'^G',f((rsum(v147^G|,|)),0,0),'^H',f((rsum(v147^H|,|)),0,0),'^I',f((rsum(v147^I|,|)),0,0),'^J',f((rsum(v147^J|,|)),0,0),'^K',f((rsum(v147^K|,|)),0,0),'^Z',f((rsum(v147^Z|,|)),0,0),

DEL
147
*


ADD
147

v1001

REP
147
1
"^A"v147^A,,"^B"v147^B,,"^C"v147^C,,"^D"v147^D,,"^E"v147^E,,"^F"v147^F,,"^G"v147^G,,"^H"v147^H,,"^I"v147^I,,"^J"v147^J,,"^K"v147^K,,"^Z"v147^Z,,

DEL
1001
*


//-----------148-----------0123456789 ABCDEFGHIJK !LMNPQRSTUVWXY?
ADD
1001

'^0',f((rsum(v148^0|,|)),0,0),'^1',f((rsum(v148^1|,|)),0,0),'^2',f((rsum(v148^2|,|)),0,0),'^3',f((rsum(v148^3|,|)),0,0),'^4',f((rsum(v148^4|,|)),0,0),'^5',f((rsum(v148^5|,|)),0,0),'^6',f((rsum(v148^6|,|)),0,0),'^7',f((rsum(v148^7|,|)),0,0),'^8',f((rsum(v148^8|,|)),0,0),'^9',f((rsum(v148^9|,|)),0,0),'^A',f((rsum(v148^A|,|)),0,0),'^B',f((rsum(v148^B|,|)),0,0),'^C',f((rsum(v148^C|,|)),0,0),'^D',f((rsum(v148^D|,|)),0,0),'^E',f((rsum(v148^E|,|)),0,0),'^F',f((rsum(v148^F|,|)),0,0),'^G',f((rsum(v148^G|,|)),0,0),'^H',f((rsum(v148^H|,|)),0,0),'^I',f((rsum(v148^I|,|)),0,0),'^J',f((rsum(v148^J|,|)),0,0),'^K',f((rsum(v148^K|,|)),0,0),'^!',f((rsum(v148^!|,|)),0,0),'^L',f((rsum(v148^L|,|)),0,0),'^M',f((rsum(v148^M|,|)),0,0),'^N',f((rsum(v148^N|,|)),0,0),'^P',f((rsum(v148^P|,|)),0,0),'^Q',f((rsum(v148^Q|,|)),0,0),'^R',f((rsum(v148^R|,|)),0,0),'^S',f((rsum(v148^S|,|)),0,0),'^T',f((rsum(v148^T|,|)),0,0),'^U',f((rsum(v148^U|,|)),0,0),'^V',f((rsum(v148^V|,|)),0,0),'^W',f((rsum(v148^W|,|)),0,0),'^X',f((rsum(v148^x|,|)),0,0),'^Y',f((rsum(v148^Y|,|)),0,0),'^?',f((rsum(v148^?|,|)),0,0),

DEL
148
*


ADD
148

v1001

REP
148
1
"^0"v148^0,,"^1"v148^1,,"^2"v148^2,,"^3"v148^3,,"^4"v148^4,,"^5"v148^5,,"^6"v148^6,,"^7"v148^7,,"^8"v148^8,,"^9"v148^9,,"^A"v148^A,,"^B"v148^B,,"^C"v148^C,,"^D"v148^D,,"^E"v148^E,,"^F"v148^F,,"^G"v148^G,,"^H"v148^H,,"^I"v148^I,,"^J"v148^J,,"^K"v148^K,,"^!"v148^!,,"^L"v148^L,,"^M"v148^M,,"^N"v148^N,,"^P"v148^P,,"^Q"v148^Q,,"^R"v148^R,,"^S"v148^S,,"^T"v148^T,,"^U!"v148^U,,"^V"v148^V,,"^W"v148^W,,"^X"v148^X,,"^Y"v148^Y,,"^?"v148^?,,


DEL
1001
*


//-----------149------------12345 ABCDEFG HIJKLMN OPQRSTUV
ADD
1001

'^1',f((rsum(v149^1|,|)),0,0),'^2',f((rsum(v149^2|,|)),0,0),'^3',f((rsum(v149^3|,|)),0,0),'^4',f((rsum(v149^4|,|)),0,0),'^5',f((rsum(v149^5|,|)),0,0),'^A',f((rsum(v149^A|,|)),0,0),'^B',f((rsum(v149^B|,|)),0,0),'^C',f((rsum(v149^C|,|)),0,0),'^D',f((rsum(v149^D|,|)),0,0),'^E',f((rsum(v149^E|,|)),0,0),'^F',f((rsum(v149^F|,|)),0,0),'^G',f((rsum(v149^G|,|)),0,0),'^H',f((rsum(v149^H|,|)),0,0),'^I',f((rsum(v149^I|,|)),0,0),'^J',f((rsum(v149^J|,|)),0,0),'^K',f((rsum(v149^K|,|)),0,0),'^L',f((rsum(v149^L|,|)),0,0),'^M',f((rsum(v149^M|,|)),0,0),'^N',f((rsum(v149^N|,|)),0,0),'^O',f((rsum(v149^O|,|)),0,0),'^P',f((rsum(v149^P|,|)),0,0),'^Q',f((rsum(v149^Q|,|)),0,0),'^R',f((rsum(v149^R|,|)),0,0),'^S',f((rsum(v149^S|,|)),0,0),'^T',f((rsum(v149^T|,|)),0,0),'^U',f((rsum(v149^U|,|)),0,0),'^V',f((rsum(v149^V|,|)),0,0),

DEL
149
*
0

ADD
149

v1001

REP
149
1
"^1"v149^1,,"^2"v149^2,,"^3"v149^3,,"^4"v149^4,,"^5"v149^5,,"^A"v149^A,,"^B"v149^B,,"^C"v149^C,,"^D"v149^D,,"^E"v149^E,,"^F"v149^F,,"^G"v149^G,,"^H"v149^H,,"^I"v149^I,,"^J"v149^J,,"^K"v149^K,,"^L"v149^L,,"^M"v149^M,,"^N"v149^N,,"^O"v149^O,,"^P"v149^P,,"^R"v149^R,,"^S"v149^S,,"^T"v149^T,,"^U"v149^U,,"^V"v149^V,,

DEL
1001
*


//-----------150--------------1234 ABCDEFGHI
ADD
1001

'^1',f((rsum(v150^1|,|)),0,0),'^2',f((rsum(v150^2|,|)),0,0),'^3',f((rsum(v150^3|,|)),0,0),'^4',f((rsum(v150^4|,|)),0,0),'^A',f((rsum(v150^A|,|)),0,0),'^B',f((rsum(v150^B|,|)),0,0),'^C',f((rsum(v150^C|,|)),0,0),'^D',f((rsum(v150^D|,|)),0,0),'^E',f((rsum(v150^E|,|)),0,0),'^F',f((rsum(v150^F|,|)),0,0),'^G',f((rsum(v150^G|,|)),0,0),'^H',f((rsum(v150^H|,|)),0,0),'^I',f((rsum(v150^I|,|)),0,0),


DEL
150
*


ADD
150

v1001

REP
150
1
"^1"v150^1,,"^2"v150^2,,"^3"v150^3,,"^4"v150^4,,"^A"v150^A,,"^B"v150^B,,"^C"v150^C,,"^D"v150^D,,"^E"v150^E,,"^F"v150^F,,"^G"v150^G,,"^H"v150^H,,"^I"v150^I,,

DEL
1001
*


//----------151-------------0123456789 ABCDEX
ADD
1001

'^0',f((rsum(v151^0|,|)),0,0),'^1',f((rsum(v151^1|,|)),0,0),'^2',f((rsum(v151^2|,|)),0,0),'^3',f((rsum(v151^3|,|)),0,0),'^4',f((rsum(v151^4|,|)),0,0),'^5',f((rsum(v151^5|,|)),0,0),'^6',f((rsum(v151^6|,|)),0,0),'^7',f((rsum(v151^7|,|)),0,0),'^8',f((rsum(v151^8|,|)),0,0),'^9',f((rsum(v151^9|,|)),0,0),'^A',f((rsum(v151^A|,|)),0,0),'^B',f((rsum(v151^B|,|)),0,0),'^C',f((rsum(v151^C|,|)),0,0),'^D',f((rsum(v151^D|,|)),0,0),'^E',f((rsum(v151^E|,|)),0,0),'^x',f((rsum(v151^x|,|)),0,0),

DEL
151
*


ADD
151

v1001

REP
151
1
"^0"v151^0,,"^1"v151^1,,"^2"v151^2,,"^3"v151^3,,"^4"v151^4,,"^5"v151^5,,"^6"v151^6,,"^7"v151^7,,"^8"v151^8,,"^9"v151^9,,"^A"v151^A,,"^B"v151^B,,"^C"v151^C,,"^D"v151^D,,"^E"v151^E,,"^X"v151^X,,

DEL
1001
*


//----------155------------2 VPXLWB2ACQR
ADD
1001

'^V',f((rsum(v155^V|,|)),0,0),'^P',f((rsum(v155^P|,|)),0,0),'^X',f((rsum(v155^X|,|)),0,0),'^L',f((rsum(v155^L|,|)),0,0),'^W',f((rsum(v155^W|,|)),0,0),'^B',f((rsum(v155^B|,|)),0,0),'^2',f((rsum(v155^2|,|)),0,0),'^A',f((rsum(v155^A|,|)),0,0),'^C',f((rsum(v155^C|,|)),0,0),'^Q',f((rsum(v155^Q|,|)),0,0),'^R',f((rsum(v155^R|,|)),0,0),

DEL
155
*


ADD
155

v1001

REP
155
1
"^V"v155^V,,"^P"v155^P,,"^X"v155^X,,"^L"v155^L,,"^W"v155^W,,"^B"v155^B,,"^2"v155^2,,"^A"v155^A,,"^C"v155^C,,"^Q"v155^Q,,"^R"v155^R,,

DEL
1001
*


//-------------44-----------------
DEL
1001
*


DEL
1002
*


ADD
1001

mpu,(|^I|v44^I,|^H|v44^H/)

ADD
1002

&uf('+7W1#',(v1001/)),,&uf('+7G1'),,(G1/)

// цикл по уникальным ^I^H = v1002
REPEAT
DEL
1003
*


ADD
1003

(if p(v44) then if &uf('Av1002#1')=&uf('+97',|^I|v44^I,|^H|v44^H) then v44 fi fi/)

DEL
1004
*


ADD
1004

&uf('Av1002#1'),,,'^0',f((rsum(v1003^0|,|)),0,0),'^1',f((rsum(v1003^1|,|)),0,0),'^2',f((rsum(v1003^2|,|)),0,0),'^3',f((rsum(v1003^3|,|)),0,0),'^4',f((rsum(v1003^4|,|)),0,0),'^5',f((rsum(v1003^5|,|)),0,0),'^6',f((rsum(v1003^6|,|)),0,0),'^7',f((rsum(v1003^7|,|)),0,0),'^8',f((rsum(v1003^8|,|)),0,0),'^9',f((rsum(v1003^9|,|)),0,0),'^A',f((rsum(v1003^A|,|)),0,0),'^B',f((rsum(v1003^B|,|)),0,0),'^C',f((rsum(v1003^C|,|)),0,0),'^D',f((rsum(v1003^D|,|)),0,0),'^E',f((rsum(v1003^E|,|)),0,0),'^F',f((rsum(v1003^F|,|)),0,0),'^G',f((rsum(v1003^G|,|)),0,0),,,'^J',f((rsum(v1003^J|,|)),0,0),'^K',f((rsum(v1003^K|,|)),0,0),'^L',f((rsum(v1003^L|,|)),0,0),'^M',f((rsum(v1003^M|,|)),0,0),'^N',f((rsum(v1003^N|,|)),0,0),'^O',f((rsum(v1003^O|,|)),0,0),'^P',f((rsum(v1003^P|,|)),0,0),'^Q',f((rsum(v1003^Q|,|)),0,0),'^R',f((rsum(v1003^R|,|)),0,0),'^S',f((rsum(v1003^S|,|)),0,0),'^T',f((rsum(v1003^T|,|)),0,0),'^U',f((rsum(v1003^U|,|)),0,0),'^V',f((rsum(v1003^V|,|)),0,0),'^W',f((rsum(v1003^W|,|)),0,0),'^x',f((rsum(v1003^x|,|)),0,0),'^Y',f((rsum(v1003^Y|,|)),0,0),'^Z',f((rsum(v1003^Z|,|)),0,0),'^+',f((rsum(v1003^+|,|)),0,2),

REP
1004
1
"^I"v1004^I,,"^H"v1004^H,,"^0"v1004^0,,"^1"v1004^1,,"^2"v1004^2,,"^3"v1004^3,,"^4"v1004^4,,"^5"v1004^5,,"^6"v1004^6,,"^7"v1004^7,,"^8"v1004^8,,"^9"v1004^9,,"^A"v1004^A,,"^B"v1004^B,,"^C"v1004^C,,"^D"v1004^D,,"^E"v1044^E,,"^F"v1004^F,,"^G"v1003^G,,"^J"v1004^J,,"^K"v1004^K,,"^L"v1004^L,,"^M"v1004^M,,"^N"v1004^N,,"^O"v1004^O,,"^P"v1004^P,,"^Q"v1004^Q,,"^R"v1004^R,,"^S"v1004^S,,"^T"v1004^T,,"^U"v1004^U,,"^V"v1004^V,,"^w"v1004^w,,"^X"v1004^X,,"^Y"v1004^Y,,"^Z"v1004^Z,,"^+"v1004^+,,,,"^-"v1004^-,,

ADD
1044

v1004

DEL
1002
1


UNTIL
if p(v1002) then '1' fi
DEL
44
*


ADD
44

(v1044/)

DEL
1001
*


DEL
1002
*


DEL
1003
*


DEL
1004
*


DEL
1044
*


//-------------744--------------------
DEL
1001
*


DEL
1002
*


ADD
1001

mpu,(|^I|v744^I,|^H|v744^H/)

ADD
1002

&uf('+7W1#',(v1001/)),,&uf('+7G1'),,(G1/)

// цикл по уникальным ^I^H = v1002
REPEAT
DEL
1003
*


ADD
1003

(if p(v744) then if &uf('Av1002#1')=&uf('+97',|^I|v744^I,|^H|v744^H) then v744 fi fi/)

DEL
1004
*


ADD
1004

&uf('Av1002#1'),,,'^0',f((rsum(v1003^0|,|)),0,0),'^1',f((rsum(v1003^1|,|)),0,0),'^2',f((rsum(v1003^2|,|)),0,0),'^3',f((rsum(v1003^3|,|)),0,0),'^4',f((rsum(v1003^4|,|)),0,0),'^5',f((rsum(v1003^5|,|)),0,0),'^6',f((rsum(v1003^6|,|)),0,0),'^7',f((rsum(v1003^7|,|)),0,0),'^8',f((rsum(v1003^8|,|)),0,0),'^9',f((rsum(v1003^9|,|)),0,0),'^A',f((rsum(v1003^A|,|)),0,0),'^B',f((rsum(v1003^B|,|)),0,0),'^C',f((rsum(v1003^C|,|)),0,0),'^D',f((rsum(v1003^D|,|)),0,0),'^E',f((rsum(v1003^E|,|)),0,2),'^F',f((rsum(v1003^F|,|)),0,0),'^G',f((rsum(v1003^G|,|)),0,0),,,'^J',f((rsum(v1003^J|,|)),0,0),'^K',f((rsum(v1003^K|,|)),0,0),'^L',f((rsum(v1003^L|,|)),0,0),'^M',f((rsum(v1003^M|,|)),0,0),'^N',f((rsum(v1003^N|,|)),0,0),'^O',f((rsum(v1003^O|,|)),0,0),'^P',f((rsum(v1003^P|,|)),0,0),'^Q',f((rsum(v1003^Q|,|)),0,0),'^R',f((rsum(v1003^R|,|)),0,0),'^S',f((rsum(v1003^S|,|)),0,0),'^T',f((rsum(v1003^T|,|)),0,0),'^U',f((rsum(v1003^U|,|)),0,0),'^V',f((rsum(v1003^V|,|)),0,0),'^W',f((rsum(v1003^W|,|)),0,0),'^x',f((rsum(v1003^x|,|)),0,0),'^Y',f((rsum(v1003^Y|,|)),0,0),'^Z',f((rsum(v1003^Z|,|)),0,0),'^+',f((rsum(v1003^+|,|)),0,2),

REP
1004
1
"^I"v1004^I,,"^H"v1004^H,,"^0"v1004^0,,"^1"v1004^1,,"^2"v1004^2,,"^3"v1004^3,,"^4"v1004^4,,"^5"v1004^5,,"^6"v1004^6,,"^7"v1004^7,,"^8"v1004^8,,"^9"v1004^9,,"^A"v1004^A,,"^B"v1004^B,,"^C"v1004^C,,"^D"v1004^D,,"^E"v1044^E,,"^F"v1004^F,,"^G"v1003^G,,"^J"v1004^J,,"^K"v1004^K,,"^L"v1004^L,,"^M"v1004^M,,"^N"v1004^N,,"^O"v1004^O,,"^P"v1004^P,,"^Q"v1004^Q,,"^R"v1004^R,,"^S"v1004^S,,"^T"v1004^T,,"^U"v1004^U,,"^V"v1004^V,,"^w"v1004^w,,"^X"v1004^X,,"^Y"v1004^Y,,"^Z"v1004^Z,,"^+"v1004^+,,

ADD
1044

v1004

DEL
1002
1


UNTIL
if p(v1002) then '1' fi
DEL
744
*


ADD
744

(v1044/)

DEL
1001
*


DEL
1002
*


DEL
1003
*


DEL
1004
*


DEL
1044
*


//===========дополнительно для ВЫБЫТИЯ
//----------180---------ABCDEFGHIJK
DEL
1001
*


ADD
1001

'^A',f((rsum(v180^A|,|)),0,0),'^B',f((rsum(v180^B|,|)),0,0),'^C',f((rsum(v180^C|,|)),0,2),'^D',f((rsum(v180^D|,|)),0,0),'^E',f((rsum(v180^E|,|)),0,0),'^F',f((rsum(v180^F|,|)),0,0),'^G',f((rsum(v180^G|,|)),0,0),'^H',f((rsum(v180^H|,|)),0,0),'^I',f((rsum(v180^I|,|)),0,0),'^J',f((rsum(v180^J|,|)),0,0),'^K',f((rsum(v180^K|,|)),0,0),

DEL
180
*


ADD
180

v1001

REP
180
1
"^A"v180^A,,"^B"v180^B,,"^C"v180^C,,"^D"v180^D,,"^E"v180^E,,"^F"v180^F,,"^G"v180^G,,"^H"v180^H,,"^I"v180^I,,"^J"v180^J,,"^K"v180^K,,

DEL
1001
*


//----------910------------2
ADD
1001

'^2',f((rsum(v910^2|,|)),0,2),

DEL
910
*


ADD
910

v1001

REP
910
1
"^2"v910^2,,

DEL
1001
*


